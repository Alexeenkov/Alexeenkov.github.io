"use strict";(self["webpackChunktodos"]=self["webpackChunktodos"]||[]).push([[909],{2909:function(t,e,o){o.r(e),o.d(e,{default:function(){return Ft}});var a,s=o(3396),l=o(4870),i=o(7139),d=(o(7658),o(2578));(function(t){t["ALL"]="All",t["ACTIVE"]="Active",t["DONE"]="Done"})(a||(a={}));const n=(0,d.Q_)("todos",(()=>{const t=(0,l.iH)([]),e=(0,l.iH)(a.ALL),o=(0,l.iH)(!0),i=(0,l.iH)(null),d=(0,l.iH)({isEditing:!1,id:null}),n=(0,s.Fl)((()=>(0,l.SU)(t).filter((t=>!t.completed)))),r=(0,s.Fl)((()=>(0,l.SU)(t).filter((t=>t.completed)))),c=(0,s.Fl)((()=>({active:(0,l.SU)(n).length,done:(0,l.SU)(r).length}))),u=(0,s.Fl)((()=>{switch((0,l.SU)(e)){case a.DONE:return(0,l.SU)(t).filter((t=>t.completed));case a.ACTIVE:return(0,l.SU)(t).filter((t=>!t.completed));case a.ALL:default:return(0,l.SU)(t)}})),_=(0,s.Fl)((()=>{if(null===(0,l.SU)(i))return(0,l.SU)(u);const t=864e5;return console.log("Фильтрация по дате сработала!"),(0,l.SU)(u).filter((e=>e.date>(0,l.SU)(i)&&e.date<(0,l.SU)(i)+t))})),v=t=>{i.value=t?new Date(t.toDateString()).getTime():null},m=()=>{(0,l.SU)(o)?t.value.sort(((t,e)=>t.date-e.date)):t.value.sort(((t,e)=>e.date-t.date))},S=()=>{o.value=!(0,l.SU)(o),m()},p=()=>{d.value.isEditing=!1,d.value.id=null},U=t=>{e.value=t,p()},f=e=>{t.value=(0,l.SU)(t).filter((t=>t.id!==e))},b=e=>{(0,l.SU)(t).push(e)},g=e=>{const o=(0,l.SU)(t).find((t=>t.id===e));o&&(o.completed=!o.completed)},k=t=>{d.value.isEditing=!0,d.value.id=t},D=(e,o,a)=>{const s=(0,l.SU)(t).find((t=>t.id===e));s&&(s.text=o,s.completed=!1,s.date=a.getTime()),p()},w=localStorage.getItem("todos");return w&&(t.value=JSON.parse(w)._value,m()),(0,s.YP)((()=>t),(t=>{localStorage.setItem("todos",JSON.stringify(t)),m()}),{deep:!0}),{todos:t,activeFilter:e,isSortEarlyFirst:o,filteredDate:i,editableTodo:d,filteredTodos:_,stats:c,setFilteredDate:v,toggleSortOrder:S,setFilter:U,removeTodo:f,addTodo:b,editTodo:k,toggleTodo:g,cancelEditTodo:p,saveEditedTodo:D}})),r={class:"todos-filters"},c=["onClick"];var u=(0,s.aZ)({__name:"TodosFilterByActivity",setup(t){const e=n(),{activeFilter:o}=(0,d.Jk)(e),{setFilter:u}=e,_=[a.ALL,a.ACTIVE,a.DONE],v=t=>({"button--primary":(0,l.SU)(o)===t});return(t,e)=>((0,s.wg)(),(0,s.iD)("aside",r,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(_,((t,e)=>(0,s._)("button",{key:`${t}-${e}`,onClick:e=>(0,l.SU)(u)(t),class:(0,i.C_)(["todos-filters__button button",v(t)])},(0,i.zw)(t),11,c))),64))]))}}),_=o(89);const v=(0,_.Z)(u,[["__scopeId","data-v-64c6d89c"]]);var m=v,S=o(9242);const p=t=>{const e=(0,s.Fl)((()=>(0,l.SU)(t).getDate().toString())),o=(0,s.Fl)((()=>((0,l.SU)(t).getMonth()+1).toString())),a=(0,s.Fl)((()=>(0,l.SU)(t).getFullYear().toString().slice(2))),i=(0,s.Fl)((()=>`${(0,l.SU)(e)}.${(0,l.SU)(o)}.${(0,l.SU)(a)}`));return{day:e,month:o,year:a,formatDatepicker:i}},U=t=>((0,s.dD)("data-v-29734d7b"),t=t(),(0,s.Cn)(),t),f=["onClick"],b=U((()=>(0,s._)("div",{class:"todos-list-item__status"},[(0,s._)("i",{class:"bi bi-check2"})],-1))),g={class:"todos-list-item__text"},k={class:"todos-list-item__date"},D={class:"todos-list-item__buttons"},w=U((()=>(0,s._)("i",{class:"bi bi-pencil"},null,-1))),y=[w],T=U((()=>(0,s._)("i",{class:"bi bi-trash3"},null,-1))),F=[T],C=["onClick"],E=U((()=>(0,s._)("i",{class:"bi bi-floppy"},null,-1))),I=[E],V=["onClick"],Z=U((()=>(0,s._)("i",{class:"bi bi-x-lg"},null,-1))),h=[Z];var A=(0,s.aZ)({__name:"TodosListItem",props:{todo:{type:Object,required:!0}},setup(t){const e=t,{todo:o}=(0,l.BK)(e),a=n(),{editableTodo:r}=(0,d.Jk)(a),{toggleTodo:c,removeTodo:u,editTodo:_,saveEditedTodo:v,cancelEditTodo:m}=a;let U=new Date(o.value.date);const w=(0,l.iH)((0,l.SU)(o).text),T=(0,l.iH)(U),{day:E,month:Z,year:A,formatDatepicker:H}=p(T),L=(0,s.Fl)((()=>(0,l.SU)(r).isEditing&&(0,l.SU)(r).id===(0,l.SU)(o).id)),x=(0,s.Fl)((()=>({"todos-list-item--done":(0,l.SU)(o).completed&&!(0,l.SU)(L),"todos-list-item--disabled":(0,l.SU)(r).isEditing&&(0,l.SU)(r).id!==(0,l.SU)(o).id,"todos-list-item--editing":(0,l.SU)(L)}))),W=()=>{(0,l.SU)(r).isEditing||c((0,l.SU)(o).id)},J=()=>{v((0,l.SU)(o).id,(0,l.SU)(w),(0,l.SU)(T)),U=(0,l.SU)(T)},O=()=>{m(),w.value=(0,l.SU)(o).text,T.value=U};return(0,s.Jd)((()=>{(0,l.SU)(L)&&m()})),(t,e)=>{const a=(0,s.up)("VueDatePicker"),d=(0,s.Q2)("autofocus");return(0,s.wg)(),(0,s.iD)("li",{class:(0,i.C_)(["todos-list-item",x.value])},[(0,s._)("button",{onClick:(0,S.iM)(W,["stop"]),type:"button",class:"todos-list-item__button"},[b,(0,s._)("div",g,[(0,s.Uk)((0,i.zw)((0,l.SU)(o).text)+" ",1),L.value?(0,s.wy)(((0,s.wg)(),(0,s.iD)("textarea",{key:0,"onUpdate:modelValue":e[0]||(e[0]=t=>w.value=t),class:"todos-list-item__textarea"},null,512)),[[d],[S.nr,w.value]]):(0,s.kq)("",!0)]),(0,s._)("div",k,[L.value?((0,s.wg)(),(0,s.j4)(a,{key:1,modelValue:T.value,"onUpdate:modelValue":e[1]||(e[1]=t=>T.value=t),enableTimePicker:!1,clearable:!1,minDate:new Date,format:(0,l.SU)(H),class:"todos-list-item__datepicker"},null,8,["modelValue","minDate","format"])):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.Uk)((0,i.zw)((0,l.SU)(E))+"."+(0,i.zw)((0,l.SU)(Z))+"."+(0,i.zw)((0,l.SU)(A)),1)],64))]),(0,s._)("div",D,[L.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:e[2]||(e[2]=(0,S.iM)((t=>(0,l.SU)(_)((0,l.SU)(o).id)),["stop"])),type:"button",class:"todos-list-item__edit"},y)),L.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:e[3]||(e[3]=(0,S.iM)((t=>(0,l.SU)(u)((0,l.SU)(o).id)),["stop"])),type:"button",class:"todos-list-item__remove"},F)),L.value?((0,s.wg)(),(0,s.iD)("button",{key:2,onClick:(0,S.iM)(J,["stop"]),type:"button",class:"todos-list-item__save"},I,8,C)):(0,s.kq)("",!0),L.value?((0,s.wg)(),(0,s.iD)("button",{key:3,onClick:(0,S.iM)(O,["stop"]),type:"button",class:"todos-list-item__cancel"},h,8,V)):(0,s.kq)("",!0)])],8,f)],2)}}});const H=(0,_.Z)(A,[["__scopeId","data-v-29734d7b"]]);var L=H;const x={class:"todos-list"},W={key:0,class:"todos-list__items"},J={key:1};var O=(0,s.aZ)({__name:"TodosList",setup(t){const{filteredTodos:e,activeFilter:o}=(0,d.Jk)(n()),r=(0,s.Fl)((()=>{switch((0,l.SU)(o)){case a.DONE:return"No completed any tasks";case a.ACTIVE:return"No active tasks";case a.ALL:default:return"There are no tasks"}}));return(t,o)=>((0,s.wg)(),(0,s.iD)("div",x,[(0,l.SU)(e).length?((0,s.wg)(),(0,s.iD)("ul",W,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)((0,l.SU)(e),(t=>((0,s.wg)(),(0,s.j4)(L,{key:t.id,todo:t},null,8,["todo"])))),128))])):((0,s.wg)(),(0,s.iD)("span",J,(0,i.zw)(r.value),1))]))}});const P=(0,_.Z)(O,[["__scopeId","data-v-e22cdcce"]]);var z=P;const N=t=>((0,s.dD)("data-v-6d3aadab"),t=t(),(0,s.Cn)(),t),$={class:"todos-form-add"},q=["onSubmit"],M=N((()=>(0,s._)("i",{class:"bi bi-x"},null,-1))),Y=[M],j={class:"todos-form-add__input-container"},B={class:"todos-form-add__input todos-form-add__input--focus"},K=N((()=>(0,s._)("button",{class:"button button--filled"}," Add task ",-1))),Q=N((()=>(0,s._)("i",{class:"bi bi-plus-lg"},null,-1))),G=[Q];var R=(0,s.aZ)({__name:"TodosFormAdd",setup(t){const{addTodo:e,cancelEditTodo:o}=n(),a=(0,l.iH)(!1),i=(0,l.iH)(""),d=new Date,r=(0,l.iH)(d),{formatDatepicker:c}=p(r),u=()=>{a.value=!0,o()},_=()=>{a.value=!1},v=()=>{e({id:Date.now(),text:i.value,completed:!1,date:r.value.getTime()}),i.value="",_()};return(t,e)=>{const o=(0,s.up)("VueDatePicker"),n=(0,s.Q2)("autofocus");return(0,s.wg)(),(0,s.iD)("section",$,[a.value?((0,s.wg)(),(0,s.iD)("form",{key:0,onSubmit:(0,S.iM)(v,["prevent"]),class:"todos-form-add__form"},[(0,s._)("button",{onClick:_,type:"button",class:"todos-form-add__close"},Y),(0,s._)("div",j,[(0,s._)("div",B,[(0,s.wy)((0,s._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t)},null,512),[[n],[S.nr,i.value]])]),(0,s.Wm)(o,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=t=>r.value=t),enableTimePicker:!1,minDate:(0,l.SU)(d),format:(0,l.SU)(c),clearable:!1,class:"todos-form-add__datepicker"},null,8,["modelValue","minDate","format"])]),K],40,q)):((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:u,class:"todos-form-add__show-form"},G))])}}});const X=(0,_.Z)(R,[["__scopeId","data-v-6d3aadab"]]);var tt=X;const et={class:"todos-footer"};var ot=(0,s.aZ)({__name:"TodosFooter",setup(t){const{stats:e}=(0,d.Jk)(n());return(t,o)=>((0,s.wg)(),(0,s.iD)("footer",et,(0,i.zw)((0,l.SU)(e).active)+" more to do, "+(0,i.zw)((0,l.SU)(e).done)+" done ",1))}});const at=(0,_.Z)(ot,[["__scopeId","data-v-11f27240"]]);var st=at;const lt={class:"layout-default"},it={class:"layout-default__filters"},dt={class:"layout-default__main"},nt={class:"layout-default__footer"};function rt(t,e){return(0,s.wg)(),(0,s.iD)("div",lt,[(0,s._)("aside",it,[(0,s.WI)(t.$slots,"filters",{},void 0,!0)]),(0,s._)("main",dt,[(0,s.WI)(t.$slots,"default",{},void 0,!0)]),(0,s._)("div",nt,[(0,s.WI)(t.$slots,"footer",{},void 0,!0)])])}const ct={},ut=(0,_.Z)(ct,[["render",rt],["__scopeId","data-v-1685cf41"]]);var _t=ut;const vt={key:0,class:"bi bi-sort-down-alt"},mt={key:1,class:"bi bi-sort-up-alt"};var St=(0,s.aZ)({__name:"TodosSortBtn",setup(t){const e=n(),{isSortEarlyFirst:o}=(0,d.Jk)(e),{toggleSortOrder:a}=e;return(t,e)=>((0,s.wg)(),(0,s.iD)("button",{onClick:e[0]||(e[0]=(...t)=>(0,l.SU)(a)&&(0,l.SU)(a)(...t)),type:"button",class:"todos-sort-btn"},[(0,l.SU)(o)?((0,s.wg)(),(0,s.iD)("i",vt)):((0,s.wg)(),(0,s.iD)("i",mt))]))}});const pt=(0,_.Z)(St,[["__scopeId","data-v-de6d7eaa"]]);var Ut=pt;const ft={class:"todos-filter-by-date"},bt={key:0,class:"bi bi-x-lg"},gt={key:1,class:"bi bi-funnel"};var kt=(0,s.aZ)({__name:"TodosFilterByDate",setup(t){const e=n(),{filteredDate:o}=(0,d.Jk)(e),{setFilteredDate:a}=e,i=(0,l.iH)(new Date),{formatDatepicker:r}=p(i),c=()=>{if((0,l.SU)(o))return a(null),void(i.value=new Date);a((0,l.SU)(i))};return(0,s.YP)((()=>i.value),(()=>{(0,l.SU)(o)&&a((0,l.SU)(i))})),(t,e)=>{const a=(0,s.up)("VueDatePicker");return(0,s.wg)(),(0,s.iD)("div",ft,[(0,l.SU)(o)?((0,s.wg)(),(0,s.j4)(a,{key:0,modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=t=>i.value=t),enableTimePicker:!1,format:(0,l.SU)(r),clearable:!1,class:"todos-filter-by-date__datepicker"},null,8,["modelValue","format"])):(0,s.kq)("",!0),(0,s._)("button",{onClick:c,type:"button",class:"todos-filter-by-date__button"},[(0,l.SU)(o)?((0,s.wg)(),(0,s.iD)("i",bt)):((0,s.wg)(),(0,s.iD)("i",gt))])])}}});const Dt=(0,_.Z)(kt,[["__scopeId","data-v-10cbab57"]]);var wt=Dt,yt=(0,s.aZ)({__name:"TodosPage",setup(t){return(t,e)=>((0,s.wg)(),(0,s.j4)(_t,{class:"todos-page"},{filters:(0,s.w5)((()=>[(0,s.Wm)(m,{class:"todos-page__filter-activity"}),(0,s.Wm)(wt,{class:"todos-page__filter-date"}),(0,s.Wm)(Ut,{class:"todos-page__sort"})])),footer:(0,s.w5)((()=>[(0,s.Wm)(st)])),default:(0,s.w5)((()=>[(0,s.Wm)(z),(0,s.Wm)(tt)])),_:1}))}});const Tt=(0,_.Z)(yt,[["__scopeId","data-v-d64d0ffc"]]);var Ft=Tt}}]);
//# sourceMappingURL=909.ab14f2dc.js.map